<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fermentors AI App</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        header { text-align: center; }
        #lesson { margin: 20px 0; }
        #widget { border: 1px solid #ccc; padding: 10px; height: 200px; overflow-y: scroll; }
        #ai-form, #signup-form { margin: 20px 0; }
    </style>
</head>
<body>
    <header>
        <h1>Welcome to Fermentors AI</h1>
    </header>
    <main>
        <section id="lesson">
            <h2>Lesson Content</h2>
            <p>This is an example lesson on AI basics for Fermentors. AI stands for Artificial Intelligence, which enables machines to perform tasks that typically require human intelligence.</p>
        </section>
        <section id="widget">
            <h2>AI Chat Widget</h2>
            <div id="chat-display"></div>
        </section>
        <section id="ai-query">
            <h2>Ask the AI</h2>
            <form id="ai-form">
                <input type="text" id="ai-input" placeholder="Enter your question" required>
                <button type="submit">Send</button>
            </form>
        </section>
        <section id="sign-up">
            <h2>Sign Up</h2>
            <form id="signup-form">
                <input type="email" id="email" placeholder="Email" required>
                <input type="password" id="password" placeholder="Password" required>
                <button type="submit">Sign Up</button>
            </form>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Fermentors</p>
    </footer>
    <script>
        // Handle AI query
        document.getElementById('ai-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const query = document.getElementById('ai-input').value;
            const response = await fetch('/ai', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ query, personality: 'Elena the Engineer' })
            });
            const data = await response.json();
            document.getElementById('chat-display').innerHTML += `<p><strong>You:</strong> ${query}</p><p><strong>AI:</strong> ${data.response}</p>`;
            document.getElementById('ai-input').value = '';
        });

        // Handle sign-up
        document.getElementById('signup-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const response = await fetch('/signup', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, password })
            });
            const data = await response.json();
            alert(data.message || 'Sign-up successful!');
        });
    </script>
</body>
</html>
